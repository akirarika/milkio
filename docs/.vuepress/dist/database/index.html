<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ•°æ®åº“ | Kurimudb</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/kurimudb/assets/css/0.styles.afb2c109.css" as="style"><link rel="preload" href="/kurimudb/assets/js/app.49699711.js" as="script"><link rel="preload" href="/kurimudb/assets/js/2.daf47ad8.js" as="script"><link rel="preload" href="/kurimudb/assets/js/10.895b4b62.js" as="script"><link rel="prefetch" href="/kurimudb/assets/js/11.185fb2d3.js"><link rel="prefetch" href="/kurimudb/assets/js/12.88bddbb0.js"><link rel="prefetch" href="/kurimudb/assets/js/13.20fac8dd.js"><link rel="prefetch" href="/kurimudb/assets/js/3.223aaabe.js"><link rel="prefetch" href="/kurimudb/assets/js/4.fb8a7a00.js"><link rel="prefetch" href="/kurimudb/assets/js/5.3f35da1a.js"><link rel="prefetch" href="/kurimudb/assets/js/6.c8fc2db8.js"><link rel="prefetch" href="/kurimudb/assets/js/7.8b05f61b.js"><link rel="prefetch" href="/kurimudb/assets/js/8.32917ebd.js"><link rel="prefetch" href="/kurimudb/assets/js/9.627b9973.js">
    <link rel="stylesheet" href="/kurimudb/assets/css/0.styles.afb2c109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kurimudb/" class="home-link router-link-active"><!----> <span class="site-name">Kurimudb</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/akirarika/kurimudb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/akirarika/kurimudb/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ›´æ–°æ—¥å¿—
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/akirarika/kurimudb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/akirarika/kurimudb/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ›´æ–°æ—¥å¿—
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/kurimudb/" aria-current="page" class="sidebar-link">ä»‹ç»</a></li><li><a href="/kurimudb/intro/" class="sidebar-link">å…¥é—¨</a></li><li><a href="/kurimudb/database/" aria-current="page" class="active sidebar-link">æ•°æ®åº“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kurimudb/database/#æ•°æ®åº“è¿ç§»" class="sidebar-link">æ•°æ®åº“è¿ç§»</a></li><li class="sidebar-sub-header"><a href="/kurimudb/database/#æŸ¥è¯¢æ„é€ å™¨" class="sidebar-link">æŸ¥è¯¢æ„é€ å™¨</a></li><li class="sidebar-sub-header"><a href="/kurimudb/database/#å¤„ç†æŸ¥è¯¢ç»“æœ" class="sidebar-link">å¤„ç†æŸ¥è¯¢ç»“æœ</a></li><li class="sidebar-sub-header"><a href="/kurimudb/database/#ç»“æœåˆ†é¡µ" class="sidebar-link">ç»“æœåˆ†é¡µ</a></li><li class="sidebar-sub-header"><a href="/kurimudb/database/#æ¨¡å‹å…³è”" class="sidebar-link">æ¨¡å‹å…³è”</a></li><li class="sidebar-sub-header"><a href="/kurimudb/database/#å…¨æ–‡æœç´¢" class="sidebar-link">å…¨æ–‡æœç´¢</a></li></ul></li><li><a href="/kurimudb/monitor/" class="sidebar-link">æ¨¡å‹è®¢é˜…</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="header-anchor">#</a> æ•°æ®åº“</h1> <h2 id="æ•°æ®åº“è¿ç§»"><a href="#æ•°æ®åº“è¿ç§»" class="header-anchor">#</a> æ•°æ®åº“è¿ç§»</h2> <p><a href="https://developer.mozilla.org/docs/Web/API/IndexedDB_API" target="_blank" rel="noopener noreferrer">IndexedDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ˜¯ Web ç«¯çš„æ•°æ®åº“ï¼Œå®ƒæœ‰ <strong>ç‰ˆæœ¬ (version)</strong> çš„æ¦‚å¿µã€‚Kurimudb ä½¿ç”¨äº† <a href="https://dexie.org/docs/API-Reference" target="_blank" rel="noopener noreferrer">Dexie.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä½œä¸ºä¸ IndexedDB é—´çš„ DAL å±‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <a href="https://dexie.org/docs/API-Reference" target="_blank" rel="noopener noreferrer">Dexie.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥æ–¹ä¾¿åœ°æ§åˆ¶ç‰ˆæœ¬ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">ä¸ºä»€ä¹ˆ IndexedDB éœ€è¦ç‰ˆæœ¬ï¼Ÿ</p> <p>ç”¨æˆ·å¯èƒ½åœ¨ä»¥å‰å°±ä½¿ç”¨äº†æˆ‘ä»¬çš„åº”ç”¨ï¼Œåœ¨ä»–çš„æµè§ˆå™¨ä¸­ï¼Œå·²ç»æŒ‰ç…§å½“æ—¶çš„ä»£ç åˆ›å»ºå¥½äº†æ•°æ®åº“ã€‚åç»­å¦‚æœéœ€è¦æ”¹åŠ¨æ•°æ®åº“ï¼Œä¸ºäº†ä¿è¯æ—§ç”¨æˆ·å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ç›´æ¥æ”¹åŠ¨åŸå…ˆçš„æ•°æ®åº“ï¼Œè€Œæ˜¯åº”è¯¥ä¸ºæ•°æ®åº“å¢åŠ ä¸€ä¸ªç‰ˆæœ¬ï¼Œç”¨æˆ·ä½¿ç”¨æ—§ç‰ˆæœ¬çš„æ•°æ®åº“æ—¶ï¼Œä¼šè‡ªåŠ¨é€šè¿‡è¿ç§»ï¼Œå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ä¸Šã€‚</p></div> <p>åœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œå¹¶ä¸”æŒ‡å®šäº†ä¸€ä¸ªç‰ˆæœ¬ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /models/connection.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;kurimudb&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">connection</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">conn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// conn æ˜¯ä¸€ä¸ª Dexie å®ä¾‹</span>
  conn<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stores</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    Config<span class="token operator">:</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åç»­è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ–°å¢ä¸€äº›åˆ«çš„æ¨¡å‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /models/connection.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;kurimudb&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">connection</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">conn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  conn<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stores</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    Note<span class="token operator">:</span> <span class="token string">&quot;++id&quot;</span><span class="token punctuation">,</span>
    Friend<span class="token operator">:</span> <span class="token string">&quot;++id&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  conn<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stores</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    Config<span class="token operator">:</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç‰ˆæœ¬çš„é¡ºåºæ˜¯ä¸é‡è¦çš„ï¼ŒDexie.js ä¼šåœ¨è¿ç§»ä¸åŒç‰ˆæœ¬æ—¶ï¼Œè‡ªåŠ¨å¯¹ç‰ˆæœ¬è¿›è¡Œæ’åºã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠæ–°çš„ç‰ˆæœ¬å†™åœ¨ä¸Šé¢ï¼Œé¿å…æœªæ¥ç‰ˆæœ¬è¿‡å¤šæ—¶ï¼Œé™ä½ä»£ç å¯è¯»æ€§ã€‚</p> <h2 id="æŸ¥è¯¢æ„é€ å™¨"><a href="#æŸ¥è¯¢æ„é€ å™¨" class="header-anchor">#</a> æŸ¥è¯¢æ„é€ å™¨</h2> <p>åœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ¨¡å‹çš„ä¸»é”®æ¥å–å‡ºå•ä¸ªæ•°æ®ã€‚æœ‰äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸€ç³»åˆ—æ¡ä»¶æ¥ç­›é€‰å‡ºä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://dexie.org/docs/Table/Table" target="_blank" rel="noopener noreferrer">Dexie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä»¥é“¾å¼è°ƒç”¨çš„è¯­æ³•ï¼Œæ¥ç¼–å†™æŸ¥è¯¢æ¡ä»¶ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æŸ¥è¯¢ id å°äº 5 çš„ä¾¿ç­¾</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> noteModel<span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span>
  noteModel
    <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœæˆ‘ä»¬å­˜å‚¨çš„æ•°æ®æ˜¯å¯¹è±¡ï¼Œä¸” <code>where</code> å‡½æ•°æŸ¥è¯¢çš„ä¸æ˜¯ä¸»é”®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>userModel<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;æ§™å³¶è–è­·&quot;</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
  weight<span class="token operator">:</span> <span class="token number">65</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> userModel<span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span>
  userModel
    <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æŸ¥è¯¢çš„ height å¹¶ä¸æ˜¯ä¸»é”®ï¼Œè€Œæ˜¯æŸä¸ªå±æ€§</span>
    <span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬åˆ™éœ€è¦åœ¨æ•°æ®åº“è¿æ¥ä¸­ï¼Œä¸ºæ­¤å±æ€§æ·»åŠ <a href="https://en.wikipedia.org/wiki/Database_index" target="_blank" rel="noopener noreferrer">ç´¢å¼•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>where</code> å‡½æ•°å¯èƒ½ä½¿ç”¨çš„å±æ€§åï¼Œéƒ½éœ€è¦æ·»åŠ ç´¢å¼•ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /models/connection.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;kurimudb&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">connection</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">conn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  conn<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stores</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    User<span class="token operator">:</span> <span class="token string">&quot;++id, height, weight&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ä¸º height å’Œ weight æ·»åŠ ç´¢å¼•</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬æ›´æ¨èå°†æŸ¥è¯¢å†™åœ¨æ¨¡å‹å†…éƒ¨ï¼Œä»¥ä¾¿å®ç°ä»£ç çš„å¤ç”¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /models/noteModel.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token keyword">extends</span> <span class="token class-name">model</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">async</span> <span class="token function">getIdBelow5Results</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">below</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨æ—¶</span>
<span class="token keyword">await</span> noteModel<span class="token punctuation">.</span><span class="token function">getIdBelow5Results</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬å»ºè®®æ‚¨é˜…è¯» <a href="https://dexie.org/docs/WhereClause/WhereClause" target="_blank" rel="noopener noreferrer">Dexie.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•ç¼–å†™æ›´å¤æ‚çš„æŸ¥è¯¢ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å¤„ç†æŸ¥è¯¢ç»“æœ"><a href="#å¤„ç†æŸ¥è¯¢ç»“æœ" class="header-anchor">#</a> å¤„ç†æŸ¥è¯¢ç»“æœ</h2> <p>æˆ‘ä»¬åˆšåˆšä½¿ç”¨äº† <code>getResults</code> å‡½æ•°ï¼ŒDexie.js è¿”å›çš„æŸ¥è¯¢ç»“æœé€šå¸¸æ˜¯ Promise æ•°ç»„ï¼Œ<code>getResults</code> å¯ä»¥å°†ç»“æœåŒ…è£…æˆé€šè¿‡ä¸»é”®å–å‡ºçš„å¯¹è±¡ï¼Œå¹¶ä½¿è¯¸å¦‚ <a href="/kurimudb/database/#æŸ¥è¯¢æ„é€ å™¨">æ¨¡å‹å…³è”</a> ç­‰ Kurimudb çš„åŠŸèƒ½å¯ç”¨ã€‚</p> <p>å¦‚æœ Dexie.js çš„æŸ¥è¯¢ç»“æœåªä¼šæœ‰ä¸€ä¸ª (å¦‚ <code>first</code> å‡½æ•°)ï¼Œé‚£ä¹ˆè¯·ç”¨ <code>getResult</code> å‡½æ•°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœæƒ³ <code>getResults</code> åŒ…è£…å‡ºçš„ç»“æœæ˜¯æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡ï¼Œä½ å¯ä»¥å‘ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ <code>Array</code>ï¼š</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted">Â </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Array
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç»“æœåˆ†é¡µ"><a href="#ç»“æœåˆ†é¡µ" class="header-anchor">#</a> ç»“æœåˆ†é¡µ</h2> <p>å¾…ç»­ ğŸ¸</p> <h2 id="æ¨¡å‹å…³è”"><a href="#æ¨¡å‹å…³è”" class="header-anchor">#</a> æ¨¡å‹å…³è”</h2> <p>å¾…ç»­ ğŸ¸</p> <h2 id="å…¨æ–‡æœç´¢"><a href="#å…¨æ–‡æœç´¢" class="header-anchor">#</a> å…¨æ–‡æœç´¢</h2> <p>å¾…ç»­ ğŸ¸</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/kurimudb/intro/" class="prev">
        å…¥é—¨
      </a></span> <span class="next"><a href="/kurimudb/monitor/">
        æ¨¡å‹è®¢é˜…
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/kurimudb/assets/js/app.49699711.js" defer></script><script src="/kurimudb/assets/js/2.daf47ad8.js" defer></script><script src="/kurimudb/assets/js/10.895b4b62.js" defer></script>
  </body>
</html>
